<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h3>비동기적인 방식으로 원격에 있는 어떤 데이터를 요청해서 가져옴</h3>


    <button type="button" onclick="some()">AJAX요청</button>


    <script>
        function some(){


            // fetch('hi.txt').then(function(response){
            //     response.text().then(function(data){
            //         alert(data);
            //     })
            // })




            // 2nd
            // promise에서 사용하는 형태
            // pendding(대기중)
            // fulfilled(성공)
            // reject(거절)

            // var promise = fetch("hi.txt"); // 프로미스객체 반환
            // promise.then(function(response){

            // })
            // console.log(promise);

            // 비동기 - 실행순서가 1 3 2 (순서를 보장하지 않음)
            // console.log(1);
            // fetch("hi.txt").then(function(response){
            //     console.log(response);//
            //     if(response.status==200){
            //         //... 성공에 대한 처리...
            //         console.log(2);
            //     }
            // })
            // console.log(3);



            //3nd
            // fetch('hi.txt').then(function(response){
            //     if(response.status==200){
            //         // response 안에 body에 요청에 대한 데이터가 들어 있음
            //         // text() - text로 파싱항
            //         // json() - json으로 파싱함
            //         // 둘다 promise객체를 반환
            //         response.text().then(function(data){
            //             alert(data);
            //         })
            //     }
            // })



            // 4nd - json데이터
            fetch('hi.json')
            .then(function(response){
                // response.json().then(function(data){
                //     console.log(data);
                // })
                return response.json();
            })
            .then(function(data){ // 첫번째 then의 리턴값을 받음
                return data;
            })
            .then(function(data){ // 두번째 then의 리턴값을 받음
                return data;
            })
            .then(function(data){
                console.log(data);
            })
        }

    </script>
</body>
</html>